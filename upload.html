<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload Data ‚Äî GreenLens</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Header -->
  <header class="site-header">
    <div class="header-inner">
      <a href="index.html" class="logo">
        <svg class="logo-icon" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="18" stroke="#4a7c59" stroke-width="2.5"/>
          <path d="M20 8 C20 8, 10 16, 12 24 C13.5 29, 18 30, 20 30 C22 30, 26.5 29, 28 24 C30 16, 20 8, 20 8Z" fill="#4a7c59"/>
          <path d="M20 14 L20 26 M16 20 Q20 16 24 20" stroke="#faf5ef" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <span class="logo-text">GreenLens</span>
      </a>
      <nav class="header-nav">
        <a href="upload.html" class="nav-btn nav-btn--active">Upload Data</a>
        <a href="outcomes.html" class="nav-btn nav-btn--accent">Outcomes</a>
        <a href="about.html" class="nav-btn">About Us</a>
      </nav>
    </div>
  </header>

  <!-- Page Hero -->
  <section class="upload-hero">
    <h1 class="upload-hero-title">Upload Your Business Data</h1>
    <p class="upload-hero-sub">We'll analyze your expenses, map them to emission categories, and calculate your carbon impact ‚Äî automatically.</p>
  </section>

  <!-- Two-Column Upload Section -->
  <section class="upload-section">
    <div class="upload-container">

      <!-- Left Column: What to upload -->
      <div class="upload-info-col">
        <h2 class="upload-col-title">What you can upload</h2>
        <p class="upload-col-desc">GreenLens accepts multiple file types ‚Äî upload as many as you need and we'll merge them into one analysis.</p>

        <div class="file-type-block">
          <div class="file-type-icon">
            <svg viewBox="0 0 32 32" fill="none"><rect x="4" y="2" width="18" height="24" rx="2" stroke="#4a7c59" stroke-width="1.8"/><path d="M16 2v6h6" stroke="#4a7c59" stroke-width="1.8" stroke-linecap="round"/><path d="M8 14h10M8 18h7" stroke="#4a7c59" stroke-width="1.5" stroke-linecap="round"/></svg>
          </div>
          <div>
            <strong>.CSV Files</strong>
            <span class="file-badge">Best accuracy</span>
          </div>
        </div>

        <p class="upload-col-sub">Your CSV should include columns such as:</p>
        <ul class="file-hints">
          <li>
            <svg viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="7" stroke="#4a7c59" stroke-width="1.5"/><path d="M5 8l2 2 4-4" stroke="#4a7c59" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span><strong>Date</strong> ‚Äî when the expense occurred</span>
          </li>
          <li>
            <svg viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="7" stroke="#4a7c59" stroke-width="1.5"/><path d="M5 8l2 2 4-4" stroke="#4a7c59" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span><strong>Vendor / Supplier</strong> ‚Äî company name (e.g. UPS, Shell, PG&E)</span>
          </li>
          <li>
            <svg viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="7" stroke="#4a7c59" stroke-width="1.5"/><path d="M5 8l2 2 4-4" stroke="#4a7c59" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span><strong>Description</strong> ‚Äî what the expense was for</span>
          </li>
          <li>
            <svg viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="7" stroke="#4a7c59" stroke-width="1.5"/><path d="M5 8l2 2 4-4" stroke="#4a7c59" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span><strong>Amount</strong> ‚Äî cost in dollars or local currency</span>
          </li>
        </ul>

        <div class="file-type-block" style="margin-top:1.25rem;">
          <div class="file-type-icon">
            <svg viewBox="0 0 32 32" fill="none"><rect x="4" y="2" width="18" height="24" rx="2" stroke="#d4867e" stroke-width="1.8"/><path d="M16 2v6h6" stroke="#d4867e" stroke-width="1.8" stroke-linecap="round"/><path d="M8 12h10M8 16h10M8 20h6" stroke="#d4867e" stroke-width="1.5" stroke-linecap="round"/></svg>
          </div>
          <div>
            <strong>.PDF Statements</strong>
            <span class="file-badge file-badge--pink">Text-based PDFs</span>
          </div>
        </div>
        <p class="upload-col-sub">Bank statements, utility bills, or expense reports exported as PDF. We extract line items automatically via text parsing.</p>

        <div class="file-type-block" style="margin-top:1.25rem;">
          <div class="file-type-icon">
            <svg viewBox="0 0 32 32" fill="none"><rect x="3" y="3" width="26" height="26" rx="3" stroke="#a08b76" stroke-width="1.8"/><circle cx="11" cy="11" r="2.5" fill="#a08b76"/><path d="M3 21l7-6 5 5 4-4 8 7" stroke="#a08b76" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>
          <div>
            <strong>Photos &amp; Screenshots</strong>
            <span class="file-badge file-badge--brown">JPG / PNG</span>
          </div>
        </div>
        <p class="upload-col-sub">Receipts, invoices, or screenshots of expense reports. Our AI vision model reads and extracts the data for you.</p>

        <div class="emission-categories">
          <p class="upload-col-sub" style="margin-bottom:0.75rem;">We categorize into 5 emission types:</p>
          <div class="em-tags">
            <span class="em-tag em-tag--energy">‚ö° Energy Efficiency</span>
            <span class="em-tag em-tag--transport">üöö Transportation</span>
            <span class="em-tag em-tag--supply">üì¶ Supply Chain</span>
            <span class="em-tag em-tag--waste">‚ôªÔ∏è Waste</span>
            <span class="em-tag em-tag--other">¬∑ Other</span>
          </div>
        </div>
      </div>

      <!-- Right Column: Upload Box -->
      <div class="upload-action-col">
        <div class="upload-box" id="dropZone">

          <!-- Default drop state -->
          <div class="upload-box-inner" id="uploadBoxInner">
            <div class="upload-icon-wrap">
              <svg viewBox="0 0 64 64" fill="none">
                <circle cx="32" cy="32" r="30" stroke="#d6e8d4" stroke-width="2"/>
                <path d="M32 42V26" stroke="#4a7c59" stroke-width="2.5" stroke-linecap="round"/>
                <path d="M24 33l8-8 8 8" stroke="#4a7c59" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M20 46h24" stroke="#4a7c59" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <p class="drop-title">Drag &amp; drop files here</p>
            <p class="drop-sub-types">CSV &nbsp;¬∑&nbsp; PDF &nbsp;¬∑&nbsp; JPG &nbsp;¬∑&nbsp; PNG</p>
            <p class="drop-or">‚Äî or ‚Äî</p>
            <label class="browse-btn" for="fileInput">Browse files</label>
            <input type="file" id="fileInput" accept=".csv,.pdf,.jpg,.jpeg,.png,.webp" multiple hidden>
            <p class="drop-hint">Upload your expense or emission data for a<br><strong>business-specific sustainability study &amp; action plan</strong></p>
          </div>

          <!-- File Queue (shown after files are added) -->
          <div class="file-queue" id="fileQueue" hidden>
            <div class="file-queue-header">
              <span class="file-queue-count" id="fileQueueCount">0 files queued</span>
              <button class="clear-queue-btn" id="clearQueueBtn">Clear all</button>
            </div>
            <ul class="file-list" id="fileList"></ul>
            <label class="add-more-btn" for="fileInput">
              <svg viewBox="0 0 16 16" fill="none"><path d="M8 3v10M3 8h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              Add more files
            </label>
          </div>

        </div>

        <button class="analyze-btn" id="analyzeBtn" disabled>
          <span class="analyze-btn-text">Analyze My Data</span>
          <svg class="analyze-btn-icon" viewBox="0 0 20 20" fill="none"><path d="M4 10h12m0 0l-4-4m4 4l-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>

        <!-- Error Banner -->
        <div class="upload-error" id="uploadError" hidden>
          <svg viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="9" stroke="#d4867e" stroke-width="1.5"/><path d="M10 6v5M10 13v1" stroke="#d4867e" stroke-width="1.5" stroke-linecap="round"/></svg>
          <span id="errorText">Something went wrong.</span>
          <button class="error-retry" id="retryRulesOnly">Use rules only</button>
        </div>
      </div>

    </div>
  </section>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-card">
      <div class="spinner"></div>
      <p class="loading-title">Analyzing your data‚Ä¶</p>
      <p class="loading-sub" id="loadingStatus">Processing files‚Ä¶</p>
    </div>
  </div>

  <!-- Results Section (hidden until analysis complete) -->
  <section class="results-section" id="resultsSection" hidden>

    <!-- Summary Banner -->
    <div class="results-banner">
      <h2 class="results-title">Analysis Complete</h2>
      <p class="results-sub" id="resultsSummaryText">Here's a breakdown of your business's emission footprint based on your uploaded data.</p>
    </div>

    <!-- Category Summary Cards -->
    <div class="results-cards-wrap">
      <div class="results-cards" id="summaryCards"></div>
    </div>

    <!-- Emissions Summary Paragraph -->
    <div class="emissions-narrative-wrap">
      <div class="emissions-narrative" id="emissionsNarrative"></div>
    </div>

    <!-- Data Table -->
    <div class="results-table-wrap">
      <div class="results-table-header">
        <h3 class="results-table-title">Itemized Expense Log</h3>
        <span class="results-table-count" id="tableCount"></span>
      </div>
      <div class="table-scroll">
        <table class="results-table" id="resultsTable">
          <thead>
            <tr>
              <th>Vendor / Description</th>
              <th>Amount</th>
              <th>Category</th>
              <th>CO‚ÇÇ Estimate</th>
              <th>Confidence</th>
            </tr>
          </thead>
          <tbody id="resultsTableBody"></tbody>
        </table>
      </div>
    </div>

    <!-- CTA to Outcomes -->
    <div class="results-cta-wrap">
      <a href="outcomes.html" class="cta-btn" id="viewOutcomesBtn">
        View Full Outcomes &amp; Recommendations
        <svg class="cta-arrow" viewBox="0 0 20 20" fill="none"><path d="M4 10h12m0 0l-4-4m4 4l-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </a>
      <button class="reset-btn" id="resetBtn">Upload different files</button>
    </div>

  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <p>&copy; 2026 GreenLens. Built for businesses that care about tomorrow.</p>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script src="config.js"></script>
  <script src="upload.js"></script>
</body>
</html>
